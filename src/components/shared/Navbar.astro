---
// src/components/shared/Navbar.astro
---

<nav
    id="main-nav"
    class="fixed top-0 w-full z-50 transition-all duration-300 bg-brand-cream/90 backdrop-blur-sm border-b border-att-black/10"
>
    <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
        <a
            href="/"
            class="font-sans font-black text-xl tracking-tighter text-att-black z-50 relative"
        >
            ATT <span class="text-brand-red">/</span> CODE.SG
        </a>

        <!-- Desktop Menu -->
        <div
            class="hidden md:flex gap-8 text-sm font-bold uppercase tracking-wide"
        >
            <a href="/#hero" class="hover:text-brand-red transition-colors"
                >Inicio</a
            >
            <a href="/#nosotros" class="hover:text-brand-red transition-colors"
                >Nosotros</a
            >
            <a href="/#filosofia" class="hover:text-brand-red transition-colors"
                >Misi√≥n</a
            >

            <div class="border-l border-gray-300 pl-8 flex gap-4">
                <a
                    href="/att"
                    class="text-att-black hover:underline decoration-2 underline-offset-4"
                    >Academia</a
                >
                <a
                    href="/codesg"
                    class="text-code-green font-display hover:scale-110 transition-transform"
                    >Maker Space</a
                >
            </div>
        </div>

        <!-- Mobile Button (Hamburger only) -->
        <button
            id="mobile-menu-btn"
            class="md:hidden text-2xl z-50 relative focus:outline-none"
            aria-label="Abrir men√∫"
        >
            <span id="open-icon">‚ò∞</span>
        </button>
    </div>

    <!-- Mobile Backdrop -->
    <div
        id="mobile-backdrop"
        class="fixed inset-0 bg-black/50 z-[90] hidden transition-opacity duration-300 backdrop-blur-sm md:hidden"
    >
    </div>

    <!-- Mobile Menu Drawer (Sidebar) -->
    <div
        id="mobile-menu"
        class="fixed top-0 right-0 h-screen w-[85%] max-w-sm bg-[#F5F2EB] z-[100] flex flex-col pt-8 px-8 space-y-6 transform translate-x-full transition-transform duration-300 shadow-2xl md:hidden overflow-y-auto border-l-4 border-att-black"
    >
        <!-- Drawer Header with Close Button -->
        <div
            class="flex justify-between items-center border-b-2 border-att-black/10 pb-4 mb-2"
        >
            <span class="font-bold text-lg tracking-widest text-brand-red"
                >MEN√ö</span
            >
            <button
                id="close-menu-btn"
                class="text-3xl leading-none hover:text-brand-red focus:outline-none"
            >
                &times;
            </button>
        </div>

        <a
            href="/#hero"
            class="mobile-link text-xl font-bold uppercase hover:text-brand-red border-b border-gray-300 pb-2"
            >Inicio</a
        >
        <a
            href="/#nosotros"
            class="mobile-link text-xl font-bold uppercase hover:text-brand-red border-b border-gray-300 pb-2"
            >Nosotros</a
        >
        <a
            href="/#filosofia"
            class="mobile-link text-xl font-bold uppercase hover:text-brand-red border-b border-gray-300 pb-2"
            >Misi√≥n</a
        >

        <div class="h-2"></div>

        <a
            href="/att"
            class="mobile-link text-lg text-att-black font-bold border-2 border-black px-4 py-3 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:translate-x-1 hover:shadow-none transition-all text-center rounded-sm bg-white"
        >
            üèõÔ∏è Academia
        </a>
        <a
            href="/codesg"
            class="mobile-link text-lg text-code-dark font-display border-2 border-black px-4 py-3 bg-white shadow-[4px_4px_0px_0px_#2A9D8F] hover:translate-x-1 hover:shadow-none transition-all text-center rounded-sm"
        >
            üß¢ Maker Space
        </a>

        <div class="mt-auto pb-8 text-xs text-gray-400 font-mono text-center">
            ATT / CODE.SG<br />
            v1.0
        </div>
    </div>
</nav>

<script>
    const openBtn = document.getElementById("mobile-menu-btn");
    const closeBtn = document.getElementById("close-menu-btn");
    const menu = document.getElementById("mobile-menu");
    const backdrop = document.getElementById("mobile-backdrop");
    const links = document.querySelectorAll(".mobile-link");

    function openMenu() {
        menu?.classList.remove("translate-x-full");
        backdrop?.classList.remove("hidden");
        document.body.classList.add("overflow-hidden");
    }

    function closeMenu() {
        menu?.classList.add("translate-x-full");
        backdrop?.classList.add("hidden");
        document.body.classList.remove("overflow-hidden");
    }

    openBtn?.addEventListener("click", openMenu);
    closeBtn?.addEventListener("click", closeMenu);
    backdrop?.addEventListener("click", closeMenu);

    // Close menu when clicking a link
    links.forEach((link) => {
        link.addEventListener("click", closeMenu);
    });
</script>
