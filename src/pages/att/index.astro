---
import { getCollection, type CollectionEntry } from "astro:content";
import { Image } from "astro:assets";
import attLogo from "../../assets/images/att/logo.png";
import BaseLayout from "../../layouts/BaseLayout.astro";

const posts = await getCollection("cursos");
// Ordenar por fecha, el más reciente primero
posts.sort(
    (a: CollectionEntry<"cursos">, b: CollectionEntry<"cursos">) =>
        b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<BaseLayout
    title="Catálogo Académico"
    description="Explora todos nuestros recursos educativos. Ingeniería rigurosa, explicada con claridad y orden."
    image="/images/default-social.jpg"
>
    <div class="p-8">
        <nav class="mb-12">
            <a href="/" class="font-bold hover:text-brand-red"
                >← VOLVER AL HUB</a
            >
        </nav>

        <header class="mb-12 border-b-4 border-att-black pb-4 text-center">
            <div class="w-24 h-24 mb-4 mx-auto">
                <Image
                    src={attLogo}
                    alt="ATT Logo"
                    class="w-full h-full object-contain drop-shadow-md"
                    loading="eager"
                />
            </div>
            <h1 class="text-5xl font-bold tracking-tight">
                Catálogo Académico
            </h1>
            <p class="text-att-gray mt-2">
                Recursos educativos abiertos para ingeniería.
            </p>
        </header>

        <!-- A. Sección "Sobre Nosotros" -->
        <section class="max-w-4xl mx-auto mb-16 px-4">
            <h2
                class="text-2xl font-bold uppercase tracking-widest text-brand-red mb-6 border-l-4 border-brand-red pl-4"
            >
                Nuestra Filosofía
            </h2>
            <div class="grid md:grid-cols-2 gap-8">
                <div>
                    <h3 class="font-bold text-lg mb-2">Misión</h3>
                    <p class="text-gray-700 leading-relaxed">
                        Proveer recursos educativos de alta calidad y precisión
                        técnica que refuercen la formación de estudiantes de
                        ingeniería, transformando la complejidad teórica en
                        conocimiento claro, estructurado y aplicable.
                    </p>
                </div>
                <div>
                    <h3 class="font-bold text-lg mb-2">Visión</h3>
                    <p class="text-gray-700 leading-relaxed">
                        Convertirnos en el referente digital de apoyo académico
                        más confiable para futuros ingenieros, elevando el
                        estándar de la enseñanza tecnológica a través de la
                        excelencia y el orden.
                    </p>
                </div>
            </div>
        </section>

        <!-- B. Sección "Nuestros Pilares" -->
        <section class="max-w-6xl mx-auto mb-16">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                {
                    [
                        {
                            title: "Excelencia",
                            text: "No subimos contenido 'a medias'. Todo tiene rigor.",
                        },
                        {
                            title: "Claridad",
                            text: "Hacemos fácil lo difícil. El orden es nuestra firma.",
                        },
                        {
                            title: "Disciplina",
                            text: "La tecnología requiere constancia y método.",
                        },
                        {
                            title: "Fundamento",
                            text: "No solo enseñamos cómo funciona, sino por qué funciona.",
                        },
                    ].map((pilar) => (
                        <div class="border border-att-black bg-brand-cream p-4 hover:shadow-tech transition-shadow">
                            <h4 class="font-bold text-att-black mb-2 uppercase text-sm border-b border-gray-300 pb-1">
                                {pilar.title}
                            </h4>
                            <p class="text-sm text-gray-600 font-medium">
                                {pilar.text}
                            </p>
                        </div>
                    ))
                }
            </div>
        </section>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {
                posts.map((post) => (
                    <a href={`/att/${post.slug}`} class="group block h-full">
                        <article class="bg-white border border-gray-200 p-6 h-full hover:shadow-tech transition-shadow duration-300 flex flex-col">
                            <div class="text-xs font-bold text-brand-red uppercase tracking-widest mb-2">
                                {post.data.category}
                            </div>
                            <h2 class="text-2xl font-bold mb-3 group-hover:underline decoration-2 underline-offset-4">
                                {post.data.title}
                            </h2>
                            <p class="text-gray-600 text-sm mb-4 flex-1">
                                {post.data.description}
                            </p>
                            <div class="text-xs font-mono text-gray-400 mt-auto pt-4 border-t border-gray-100">
                                {post.data.pubDate.toLocaleDateString()}
                            </div>
                        </article>
                    </a>
                ))
            }
        </div>

        <!-- 3. El Elemento Conector -->
        <section class="mt-24 py-12 border-t border-gray-300 text-center">
            <div class="max-w-2xl mx-auto">
                <h2 class="text-2xl font-bold mb-4">
                    Un Propósito, Dos Caminos.
                </h2>
                <p class="text-gray-600 mb-8 italic">
                    "Compartimos la misma sangre: Empoderar a través de la
                    tecnología. <br />
                    <strong>ATT</strong> pone el Conocimiento (Saber). <strong
                        >CODE.SG</strong
                    > pone la Ejecución (Hacer)."
                </p>
                <a
                    href="/codesg"
                    class="inline-block px-8 py-3 bg-code-green text-white font-bold uppercase tracking-wide hover:shadow-lg hover:scale-105 transition-all"
                >
                    Ir al Taller (CODE.SG)
                </a>
            </div>
        </section>
        <!-- Footer Académico -->
        <footer
            class="border-t-4 border-att-black bg-white py-16 mt-16 text-center"
        >
            <div class="max-w-4xl mx-auto px-6">
                <span class="block font-bold text-2xl tracking-tighter mb-6"
                    >ATT</span
                >

                <div
                    class="flex justify-center gap-8 mb-8 text-sm font-bold uppercase tracking-widest"
                >
                    <a
                        href="#"
                        class="hover:text-brand-red decoration-2 underline-offset-4 hover:underline"
                        >YouTube</a
                    >
                    <a
                        href="#"
                        class="hover:text-brand-red decoration-2 underline-offset-4 hover:underline"
                        >Instagram</a
                    >
                    <a
                        href="#"
                        class="hover:text-brand-red decoration-2 underline-offset-4 hover:underline"
                        >GitHub</a
                    >
                </div>

                <p class="text-xs text-matt-gray leading-relaxed">
                    &copy; {new Date().getFullYear()} Academia Tecnológica de Toluca.<br
                    />
                    Formando ingenieros con rigor y pasión.
                </p>
            </div>
        </footer>
    </div>
</BaseLayout>
